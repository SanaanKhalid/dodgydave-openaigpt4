(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function _e(n){const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${r}`}function ae(n){const e=new Date;return e.setDate(e.getDate()-n),_e(e)}const ue={startDate:ae(3),endDate:ae(1)},w="4.14.2";let ce=!1,P,ye,we,G,be,xe,Pe,Ee,Se;function Xe(n,e={auto:!1}){if(ce)throw new Error(`you must \`import 'openai/shims/${n.kind}'\` before importing anything else from openai`);if(P)throw new Error(`can't \`import 'openai/shims/${n.kind}'\` after \`import 'openai/shims/${P}'\``);ce=e.auto,P=n.kind,ye=n.fetch,n.Request,n.Response,n.Headers,we=n.FormData,n.Blob,G=n.File,be=n.ReadableStream,xe=n.getMultipartRequestOptions,Pe=n.getDefaultAgent,Ee=n.fileFromPath,Se=n.isFsReadStream}class He{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function We({manuallyImported:n}={}){const e=n?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,r,s,o;try{t=fetch,r=Request,s=Response,o=Headers}catch(i){throw new Error(`this environment is missing the following Web Fetch API type: ${i.message}. ${e}`)}return{kind:"web",fetch:t,Request:r,Response:s,Headers:o,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(i,a)=>({...a,body:new He(i)}),getDefaultAgent:i=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:i=>!1}}P||Xe(We(),{auto:!0});class p extends Error{}class f extends p{constructor(e,t,r,s){super(`${f.makeMessage(e,t,r)}`),this.status=e,this.headers=s;const o=t;this.error=o,this.code=o==null?void 0:o.code,this.param=o==null?void 0:o.param,this.type=o==null?void 0:o.type}static makeMessage(e,t,r){const s=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,t,r,s){if(!e)return new X({cause:Q(t)});const o=t==null?void 0:t.error;return e===400?new Re(e,o,r,s):e===401?new Ae(e,o,r,s):e===403?new ke(e,o,r,s):e===404?new Ie(e,o,r,s):e===409?new Te(e,o,r,s):e===422?new $e(e,o,r,s):e===429?new Le(e,o,r,s):e>=500?new Fe(e,o,r,s):new f(e,o,r,s)}}class Y extends f{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class X extends f{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}}class Z extends X{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Re extends f{constructor(){super(...arguments),this.status=400}}class Ae extends f{constructor(){super(...arguments),this.status=401}}class ke extends f{constructor(){super(...arguments),this.status=403}}class Ie extends f{constructor(){super(...arguments),this.status=404}}class Te extends f{constructor(){super(...arguments),this.status=409}}class $e extends f{constructor(){super(...arguments),this.status=422}}class Le extends f{constructor(){super(...arguments),this.status=429}}class Fe extends f{}class b{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;const s=new Je;async function*o(){if(!e.body)throw t.abort(),new p("Attempted to iterate over a response with no body");const a=new y,u=le(e.body);for await(const c of u)for(const d of a.decode(c)){const g=s.decode(d);g&&(yield g)}for(const c of a.flush()){const d=s.decode(c);d&&(yield d)}}async function*i(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let a=!1;try{for await(const u of o())if(!a){if(u.data.startsWith("[DONE]")){a=!0;continue}if(u.event===null){let c;try{c=JSON.parse(u.data)}catch(d){throw console.error("Could not parse message into JSON:",u.data),console.error("From chunk:",u.raw),d}if(c&&c.error)throw new f(void 0,c.error,void 0,void 0);yield c}}a=!0}catch(u){if(u instanceof Error&&u.name==="AbortError")return;throw u}finally{a||t.abort()}}return new b(i,t)}static fromReadableStream(e,t){let r=!1;async function*s(){const i=new y,a=le(e);for await(const u of a)for(const c of i.decode(u))yield c;for(const u of i.flush())yield u}async function*o(){if(r)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let i=!1;try{for await(const a of s())i||a&&(yield JSON.parse(a));i=!0}catch(a){if(a instanceof Error&&a.name==="AbortError")return;throw a}finally{i||t.abort()}}return new b(o,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),s=o=>({next:()=>{if(o.length===0){const i=r.next();e.push(i),t.push(i)}return o.shift()}});return[new b(()=>s(e),this.controller),new b(()=>s(t),this.controller)]}toReadableStream(){const e=this;let t;const r=new TextEncoder;return new be({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:o,done:i}=await t.next();if(i)return s.close();const a=r.encode(JSON.stringify(o)+`
`);s.enqueue(a)}catch(o){s.error(o)}},async cancel(){var s;await((s=t.return)==null?void 0:s.call(t))}})}}class Je{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,s]=Ke(e,":");return s.startsWith(" ")&&(s=s.substring(1)),t==="event"?this.event=s:t==="data"&&this.data.push(s),null}}class y{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const r=y.NEWLINE_CHARS.has(t[t.length-1]||"");let s=t.split(y.NEWLINE_REGEXP);return s.length===1&&!r?(this.buffer.push(s[0]),[]):(this.buffer.length>0&&(s=[this.buffer.join("")+s[0],...s.slice(1)],this.buffer=[]),r||(this.buffer=[s.pop()||""]),s)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new p(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new p(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new p("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}y.NEWLINE_CHARS=new Set([`
`,"\r","\v","\f","","","","","\u2028","\u2029"]);y.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;function Ke(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}function le(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const De=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function",Ve=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&ve(n),ve=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",Ge=n=>Ve(n)||De(n)||Se(n);async function Oe(n,e,t={}){var s;if(n=await n,De(n)){const o=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new G([o],e,t)}const r=await Ye(n);if(e||(e=Qe(n)??"unknown_file"),!t.type){const o=(s=r[0])==null?void 0:s.type;typeof o=="string"&&(t={...t,type:o})}return new G(r,e,t)}async function Ye(n){var t;let e=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)e.push(n);else if(ve(n))e.push(await n.arrayBuffer());else if(Ze(n))for await(const r of n)e.push(r);else throw new Error(`Unexpected data type: ${typeof n}; constructor: ${(t=n==null?void 0:n.constructor)==null?void 0:t.name}; props: ${ze(n)}`);return e}function ze(n){return`[${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}function Qe(n){var e;return K(n.name)||K(n.filename)||((e=K(n.path))==null?void 0:e.split(/[\\/]/).pop())}const K=n=>{if(typeof n=="string")return n;if(typeof Buffer<"u"&&n instanceof Buffer)return String(n)},Ze=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function",de=n=>n&&typeof n=="object"&&n.body&&n[Symbol.toStringTag]==="MultipartBody",R=async n=>{const e=await et(n.body);return xe(e,n)},et=async n=>{const e=new we;return await Promise.all(Object.entries(n||{}).map(([t,r])=>z(e,t,r))),e},z=async(n,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")n.append(e,String(t));else if(Ge(t)){const r=await Oe(t);n.append(e,r)}else if(Array.isArray(t))await Promise.all(t.map(r=>z(n,e+"[]",r)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([r,s])=>z(n,`${e}[${r}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var I={},tt=function(n,e,t,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!s:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(n,t):s?s.value=t:e.set(n,t),t},nt=function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},k;async function Ce(n){const{response:e}=n;if(n.options.stream)return E("response",e.status,e.url,e.headers,e.body),b.fromSSEResponse(e,n.controller);if(e.status===204)return null;const t=e.headers.get("content-type");if(t!=null&&t.includes("application/json")){const s=await e.json();return E("response",e.status,e.url,e.headers,s),s}const r=await e.text();return E("response",e.status,e.url,e.headers,r),r}class H extends Promise{constructor(e,t=Ce){super(r=>{r(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new H(this.responsePromise,async t=>e(await this.parseResponse(t)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class rt{constructor({baseURL:e,maxRetries:t=2,timeout:r=6e5,httpAgent:s,fetch:o}){this.baseURL=e,this.maxRetries=V("maxRetries",t),this.timeout=V("timeout",r),this.httpAgent=s,this.fetch=o??ye}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...ct(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${pt()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(s=>({method:e,path:t,...s})))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}return null}buildRequest(e){var x;const{method:t,path:r,query:s,headers:o={}}=e,i=de(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,a=this.calculateContentLength(i),u=this.buildURL(r,s);"timeout"in e&&V("timeout",e.timeout);const c=e.timeout??this.timeout,d=e.httpAgent??this.httpAgent??Pe(u),g=c+1e3;typeof((x=d==null?void 0:d.options)==null?void 0:x.timeout)=="number"&&g>(d.options.timeout??0)&&(d.options.timeout=g),this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const m={...a&&{"Content-Length":a},...this.defaultHeaders(e),...o};de(e.body)&&P!=="node"&&delete m["Content-Type"],Object.keys(m).forEach(J=>m[J]===null&&delete m[J]);const A={method:t,...i&&{body:i},headers:m,...d&&{agent:d},signal:e.signal??null};return this.validateHeaders(m,o),{req:A,url:u,timeout:c}}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,r,s){return f.generate(e,t,r,s)}request(e,t=null){return new H(this.makeRequest(e,t))}async makeRequest(e,t){var d,g;const r=await e;t==null&&(t=r.maxRetries??this.maxRetries);const{req:s,url:o,timeout:i}=this.buildRequest(r);if(await this.prepareRequest(s,{url:o,options:r}),E("request",o,r,s.headers),(d=r.signal)!=null&&d.aborted)throw new Y;const a=new AbortController,u=await this.fetchWithTimeout(o,s,i,a).catch(Q);if(u instanceof Error){if((g=r.signal)!=null&&g.aborted)throw new Y;if(t)return this.retryRequest(r,t);throw u.name==="AbortError"?new Z:new X({cause:u})}const c=ot(u.headers);if(!u.ok){if(t&&this.shouldRetry(u))return this.retryRequest(r,t,c);const m=await u.text().catch(Ue=>Q(Ue).message),A=lt(m),x=A?void 0:m;throw E("response",u.status,o,c,x),this.makeStatusError(u.status,A,x,c)}return{response:u,options:r,controller:a}}requestAPIList(e,t){const r=this.makeRequest(t,null);return new st(this,r,e)}buildURL(e,t){const r=ft(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return Be(s)||(t={...s,...t}),t&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,r])=>typeof r<"u").map(([t,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(t)}=`;throw new p(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,r,s){const{signal:o,...i}=t||{};o&&o.addEventListener("abort",()=>s.abort());const a=setTimeout(()=>s.abort(),r);return this.getRequestClient().fetch.call(void 0,e,{signal:s.signal,...i}).finally(()=>{clearTimeout(a)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r){let s;const o=r==null?void 0:r["retry-after"];if(o){const i=parseInt(o);Number.isNaN(i)?s=Date.parse(o)-Date.now():s=i*1e3}if(!s||!Number.isInteger(s)||s<=0||s>60*1e3){const i=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(t,i)}return await Ne(s),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const o=t-e,i=Math.min(.5*Math.pow(2,o),8),a=1-Math.random()*.25;return i*a*1e3}getUserAgent(){return`${this.constructor.name}/JS ${w}`}}class je{constructor(e,t,r,s){k.set(this,void 0),tt(this,k,e,"f"),this.options=s,this.response=t,this.body=r}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new p("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e)t.query={...t.query,...e.params};else if("url"in e){const r=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[s,o]of r)e.url.searchParams.set(s,o);t.query=void 0,t.path=e.url.toString()}return await nt(this,k,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(k=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class st extends H{constructor(e,t,r){super(t,async s=>new r(e,s.response,await Ce(s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const ot=n=>new Proxy(Object.fromEntries(n.entries()),{get(e,t){const r=t.toString();return e[r.toLowerCase()]||e[r]}}),it={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0},fe=n=>typeof n=="object"&&n!==null&&!Be(n)&&Object.keys(n).every(e=>ht(it,e)),at=()=>{if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":w,"X-Stainless-OS":pe(Deno.build.os),"X-Stainless-Arch":he(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":w,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":w,"X-Stainless-OS":pe(process.platform),"X-Stainless-Arch":he(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const n=ut();return n?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":w,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${n.browser}`,"X-Stainless-Runtime-Version":n.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":w,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function ut(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const r=t.exec(navigator.userAgent);if(r){const s=r[1]||0,o=r[2]||0,i=r[3]||0;return{browser:e,version:`${s}.${o}.${i}`}}}return null}const he=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",pe=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let me;const ct=()=>me??(me=at()),lt=n=>{try{return JSON.parse(n)}catch{return}},dt=new RegExp("^(?:[a-z]+:)?//","i"),ft=n=>dt.test(n),Ne=n=>new Promise(e=>setTimeout(e,n)),V=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new p(`${n} must be an integer`);if(e<0)throw new p(`${n} must be a positive integer`);return e},Q=n=>n instanceof Error?n:new Error(n),ge=n=>{var e,t;if(typeof process<"u")return(I==null?void 0:I[n])??void 0;if(typeof Deno<"u")return(t=(e=Deno.env)==null?void 0:e.get)==null?void 0:t.call(e,n)};function Be(n){if(!n)return!0;for(const e in n)return!1;return!0}function ht(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function E(n,...e){typeof process<"u"&&I.DEBUG==="true"&&console.log(`OpenAI:DEBUG:${n}`,...e)}const pt=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)}),mt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";class W extends je{constructor(e,t,r,s){super(e,t,r,s),this.data=r.data,this.object=r.object}getPaginatedItems(){return this.data}nextPageParams(){return null}nextPageInfo(){return null}}class ee extends je{constructor(e,t,r,s){super(e,t,r,s),this.data=r.data}getPaginatedItems(){return this.data}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var t,r;if(!((t=this.data)!=null&&t.length))return null;const e=(r=this.data[this.data.length-1])==null?void 0:r.id;return e?{params:{after:e}}:null}}class h{constructor(e){this.client=e,this.get=e.get.bind(e),this.post=e.post.bind(e),this.patch=e.patch.bind(e),this.put=e.put.bind(e),this.delete=e.delete.bind(e),this.getAPIList=e.getAPIList.bind(e)}}let T=class extends h{create(e,t){return this.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}};T||(T={});class $ extends h{constructor(){super(...arguments),this.completions=new T(this.client)}}(function(n){n.Completions=T})($||($={}));class L extends h{create(e,t){return this.post("/audio/transcriptions",R({body:e,...t}))}}L||(L={});class F extends h{create(e,t){return this.post("/audio/translations",R({body:e,...t}))}}F||(F={});class D extends h{constructor(){super(...arguments),this.transcriptions=new L(this.client),this.translations=new F(this.client)}}(function(n){n.Transcriptions=L,n.Translations=F})(D||(D={}));class v extends h{create(e,t){return this.post("/completions",{body:e,...t,stream:e.stream??!1})}}v||(v={});class O extends h{create(e,t){return this.post("/embeddings",{body:e,...t})}}O||(O={});class C extends h{create(e,t){return this.post("/edits",{body:e,...t})}}C||(C={});class j extends h{create(e,t){return this.post("/files",R({body:e,...t}))}retrieve(e,t){return this.get(`/files/${e}`,t)}list(e){return this.getAPIList("/files",te,e)}del(e,t){return this.delete(`/files/${e}`,t)}retrieveContent(e,t){return this.get(`/files/${e}/content`,{...t,headers:{Accept:"application/json",...t==null?void 0:t.headers}})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),o=Date.now();let i=await this.retrieve(e);for(;!i.status||!s.has(i.status);)if(await Ne(t),i=await this.retrieve(e),Date.now()-o>r)throw new Z({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return i}}class te extends W{}(function(n){n.FileObjectsPage=te})(j||(j={}));class N extends h{create(e,t){return this.post("/fine-tunes",{body:e,...t})}retrieve(e,t){return this.get(`/fine-tunes/${e}`,t)}list(e){return this.getAPIList("/fine-tunes",ne,e)}cancel(e,t){return this.post(`/fine-tunes/${e}/cancel`,t)}listEvents(e,t,r){return this.get(`/fine-tunes/${e}/events`,{query:t,timeout:864e5,...r,stream:(t==null?void 0:t.stream)??!1})}}class ne extends W{}(function(n){n.FineTunesPage=ne})(N||(N={}));class B extends h{create(e,t){return this.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return fe(e)?this.list({},e):this.getAPIList("/fine_tuning/jobs",re,{query:e,...t})}cancel(e,t){return this.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return fe(t)?this.listEvents(e,{},t):this.getAPIList(`/fine_tuning/jobs/${e}/events`,se,{query:t,...r})}}class re extends ee{}class se extends ee{}(function(n){n.FineTuningJobsPage=re,n.FineTuningJobEventsPage=se})(B||(B={}));class q extends h{constructor(){super(...arguments),this.jobs=new B(this.client)}}(function(n){n.Jobs=B,n.FineTuningJobsPage=re,n.FineTuningJobEventsPage=se})(q||(q={}));class M extends h{createVariation(e,t){return this.post("/images/variations",R({body:e,...t}))}edit(e,t){return this.post("/images/edits",R({body:e,...t}))}generate(e,t){return this.post("/images/generations",{body:e,...t})}}M||(M={});class U extends h{retrieve(e,t){return this.get(`/models/${e}`,t)}list(e){return this.getAPIList("/models",oe,e)}del(e,t){return this.delete(`/models/${e}`,t)}}class oe extends W{}(function(n){n.ModelsPage=oe})(U||(U={}));class _ extends h{create(e,t){return this.post("/moderations",{body:e,...t})}}_||(_={});var qe;class l extends rt{constructor({apiKey:e=ge("OPENAI_API_KEY"),organization:t=ge("OPENAI_ORG_ID")??null,...r}={}){if(e===void 0)throw new p("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const s={apiKey:e,organization:t,...r,baseURL:r.baseURL??"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&mt())throw new p(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:s.baseURL,timeout:s.timeout??6e5,httpAgent:s.httpAgent,maxRetries:s.maxRetries,fetch:s.fetch}),this.completions=new v(this),this.chat=new $(this),this.edits=new C(this),this.embeddings=new O(this),this.files=new j(this),this.images=new M(this),this.audio=new D(this),this.moderations=new _(this),this.models=new U(this),this.fineTuning=new q(this),this.fineTunes=new N(this),this._options=s,this.apiKey=e,this.organization=t}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}qe=l;l.OpenAI=qe;l.OpenAIError=p;l.APIError=f;l.APIConnectionError=X;l.APIConnectionTimeoutError=Z;l.APIUserAbortError=Y;l.NotFoundError=Ie;l.ConflictError=Te;l.RateLimitError=Le;l.BadRequestError=Re;l.AuthenticationError=Ae;l.InternalServerError=Fe;l.PermissionDeniedError=ke;l.UnprocessableEntityError=$e;(function(n){n.toFile=Oe,n.fileFromPath=Ee,n.Page=W,n.CursorPage=ee,n.Completions=v,n.Chat=$,n.Edits=C,n.Embeddings=O,n.Files=j,n.FileObjectsPage=te,n.Images=M,n.Audio=D,n.Moderations=_,n.Models=U,n.ModelsPage=oe,n.FineTuning=q,n.FineTunes=N,n.FineTunesPage=ne})(l||(l={}));const gt=l;var yt={};const ie=[],Me=document.querySelector(".generate-report-btn");Me.addEventListener("click",xt);document.getElementById("ticker-input-form").addEventListener("submit",n=>{n.preventDefault();const e=document.getElementById("ticker-input");if(e.value.length>2){Me.disabled=!1;const t=e.value;ie.push(t.toUpperCase()),e.value="",wt()}else{const t=document.getElementsByTagName("label")[0];t.style.color="red",t.textContent="You must add at least one ticker. A ticker is a 3 letter or more code for a stock. E.g TSLA for Tesla."}});function wt(){const n=document.querySelector(".ticker-choice-display");n.innerHTML="",ie.forEach(e=>{const t=document.createElement("span");t.textContent=e,t.classList.add("ticker"),n.appendChild(t)})}const S=document.querySelector(".loading-panel"),bt=document.getElementById("api-message");async function xt(){document.querySelector(".action-panel").style.display="none",S.style.display="flex";try{const n=await Promise.all(ie.map(async e=>{const t=`https://api.polygon.io/v2/aggs/ticker/${e}/range/1/day/${ue.startDate}/${ue.endDate}?apiKey=${yt.POLYGON_API_KEY}`,r=await fetch(t),s=await r.text();if(await r.status===200)return bt.innerText="Creating report...",s;S.innerText="There was an error fetching stock data."}));Pt(n.join(""))}catch(n){S.innerText="There was an error fetching stock data.",console.error("error: ",n)}}async function Pt(n){const e=[{role:"system",content:"You are a trading guru. Given data on share prices over the past 3 days, write a report of no more than 150 words describing the stocks performance and recommending whether to buy, hold or sell. Use the examples provided between ### to set the style your response."},{role:"user",content:`${n}
            ###
            OK baby, hold on tight! You are going to haate this! Over the past three days, Tesla (TSLA) shares have plummetted. The stock opened at $223.98 and closed at $202.11 on the third day, with some jumping around in the meantime. This is a great time to buy, baby! But not a great time to sell! But I'm not done! Apple (AAPL) stocks have gone stratospheric! This is a seriously hot stock right now. They opened at $166.38 and closed at $182.89 on day three. So all in all, I would hold on to Tesla shares tight if you already have them - they might bounce right back up and head to the stars! They are volatile stock, so expect the unexpected. For APPL stock, how much do you need the money? Sell now and take the profits or hang on and wait for more! If it were me, I would hang on because this stock is on fire right now!!! Apple are throwing a Wall Street party and y'all invited!
            ###
            Apple (AAPL) is the supernova in the stock sky – it shot up from $150.22 to a jaw-dropping $175.36 by the close of day three. We’re talking about a stock that’s hotter than a pepper sprout in a chilli cook-off, and it’s showing no signs of cooling down! If you’re sitting on AAPL stock, you might as well be sitting on the throne of Midas. Hold on to it, ride that rocket, and watch the fireworks, because this baby is just getting warmed up! Then there’s Meta (META), the heartthrob with a penchant for drama. It winked at us with an opening of $142.50, but by the end of the thrill ride, it was at $135.90, leaving us a little lovesick. It’s the wild horse of the stock corral, bucking and kicking, ready for a comeback. META is not for the weak-kneed So, sugar, what’s it going to be? For AAPL, my advice is to stay on that gravy train. As for META, keep your spurs on and be ready for the rally.
            ###
            `}];try{const r=await new gt({dangerouslyAllowBrowser:!0}).chat.completions.create({model:"gpt-4",messages:e,temperature:1.1,presence_penalty:0,frequency_penalty:0});Et(r.choices[0].message.content)}catch(t){console.log("Error:",t),S.innerText="Unable to access AI. Please refresh and try again"}}function Et(n){S.style.display="none";const e=document.querySelector(".output-panel"),t=document.createElement("p");e.appendChild(t),t.textContent=n,e.style.display="flex"}
